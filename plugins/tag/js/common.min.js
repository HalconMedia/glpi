;function rgb2hex(r){r=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(r&&r.length===4)?"#"+("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):""};function idealTextColor(r){var n=105;if(r.indexOf("rgb")!=-1){r=rgb2hex(r)};r=r.replace("#","");var t={R:parseInt(r.substring(0,2),16),G:parseInt(r.substring(2,4),16),B:parseInt(r.substring(4,6),16)};var o=(t.R*0.299)+(t.G*0.587)+(t.B*0.114);return((255-o)<n)?"#000000":"#ffffff"};function formatOption(r){var t="<span class='tag_choice' style='";if(typeof r.color!="undefined"&&r.color!==""){var o=idealTextColor(r.color);t+=" background-color: "+r.color+"; ";t+=" color: "+o+"; "}
else{t+=" background-color: #DDDDDD; "};t+="'>"+r.text+"</span>";return t};